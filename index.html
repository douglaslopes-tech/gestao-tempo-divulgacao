<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistema de GestÃ£o de Tempo (Colaborativo) - Douglas & Camila</title>
    <style>
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; margin: 0; padding: 20px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); min-height: 100vh; }
        .container { max-width: 1400px; margin: 0 auto; background: rgba(255, 255, 255, 0.95); border-radius: 20px; padding: 30px; box-shadow: 0 20px 40px rgba(0,0,0,0.1); }
        .header { text-align: center; margin-bottom: 40px; color: #333; }
        .header h1 { font-size: 2.5em; margin-bottom: 10px; background: linear-gradient(45deg, #667eea, #764ba2); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
        .tabs { display: flex; margin-bottom: 30px; background: #f8f9fa; border-radius: 12px; padding: 5px; flex-wrap: wrap; }
        .tab { flex: 1; padding: 12px 20px; text-align: center; cursor: pointer; border-radius: 8px; transition: all 0.3s ease; font-weight: 600; min-width: 120px; }
        .tab.active { background: linear-gradient(45deg, #667eea, #764ba2); color: white; transform: translateY(-2px); box-shadow: 0 5px 15px rgba(102, 126, 234, 0.3); }
        .tab-content { display: none; }
        .tab-content.active { display: block; animation: fadeIn 0.5s ease; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
        .schedule-grid { display: grid; grid-template-columns: 120px repeat(5, 1fr); gap: 2px; background: #e9ecef; border-radius: 12px; overflow: hidden; margin-bottom: 30px; }
        .schedule-header { background: linear-gradient(45deg, #667eea, #764ba2); color: white; padding: 15px 10px; text-align: center; font-weight: bold; font-size: 0.9em; }
        .schedule-cell { background: white; padding: 12px; min-height: 100px; border-left: 4px solid #dee2e6; transition: all 0.3s ease; }
        .legend { display: flex; justify-content: center; gap: 20px; margin: 0 auto 20px auto; padding: 10px; background: #f8f9fa; border-radius: 8px; flex-wrap: wrap; max-width: 80%; }
        .legend-item { display: flex; align-items: center; gap: 8px; font-size: 0.9em; }
        .legend-color { width: 15px; height: 15px; border-radius: 4px; }
        .task-item { position: relative; background: #f8f9fa; padding: 8px 12px; margin: 4px 0; border-radius: 6px; font-size: 0.9em; border-left: 5px solid #dee2e6; cursor: pointer; }
        .task-item-remove { position: absolute; top: 4px; right: 8px; cursor: pointer; font-weight: bold; color: #dc3545; font-size: 14px; opacity: 0.5; transition: opacity 0.2s; }
        .task-item:hover .task-item-remove { opacity: 1; }
        .task-item.responsible-douglas { border-left-color: #667eea; }
        .task-item.responsible-camila { border-left-color: #764ba2; }
        .task-item.responsible-ambos { border-left-color: #28a745; }
        .editor-form { background: #f8f9fa; border-radius: 12px; padding: 25px; margin: 20px 0; }
        .form-row { display: grid; grid-template-columns: 120px 1fr; gap: 15px; align-items: center; margin-bottom: 15px; }
        .form-input { width: 100%; box-sizing: border-box; padding: 10px; border: 2px solid #ddd; border-radius: 8px; font-size: 1em; transition: border-color 0.3s ease; }
        .form-input:focus { outline: none; border-color: #667eea; box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1); }
        .action-btn { background: linear-gradient(45deg, #667eea, #764ba2); color: white; padding: 15px 30px; border: none; border-radius: 8px; font-size: 1em; font-weight: 600; cursor: pointer; transition: all 0.3s ease; margin: 10px; }
        .action-btn:hover { transform: translateY(-2px); box-shadow: 0 10px 25px rgba(102, 126, 234, 0.3); }
        .meeting-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px; margin-top: 20px; }
        .meeting-card { position: relative; background: white; border-radius: 12px; padding: 20px; border-left: 4px solid #667eea; box-shadow: 0 5px 15px rgba(0,0,0,0.08); transition: transform 0.3s ease; }
        .meeting-card-remove { position: absolute; top: 10px; right: 15px; cursor: pointer; font-size: 20px; color: #dc3545; opacity: 0.4; transition: opacity 0.2s; }
        .meeting-card:hover .meeting-card-remove { opacity: 1; }
        .emoji-box { padding: 15px; background: #e9ecef; border-radius: 8px; text-align: center; margin-top: 20px; }
        .emoji-box span { cursor: pointer; font-size: 1.5em; margin: 0 8px; transition: transform 0.2s; display: inline-block; }
        .emoji-box span:hover { transform: scale(1.3); }
        .modal { display: none; position: fixed; z-index: 1000; left: 0; top: 0; width: 100%; height: 100%; overflow: auto; background-color: rgba(0,0,0,0.5); animation: fadeIn 0.3s; }
        .modal-content { background-color: #fefefe; margin: 15% auto; padding: 25px; border: 1px solid #888; width: 80%; max-width: 500px; border-radius: 12px; position: relative; }
        .modal-close { color: #aaa; float: right; font-size: 28px; font-weight: bold; cursor: pointer; }
        .modal-close:hover { color: black; }
        .status-indicator { text-align: center; padding: 10px; background-color: #fffde7; color: #f57f17; font-weight: bold; border-radius: 8px; margin-bottom: 20px; }
        .tips-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 20px; }
        .tip-card { background: white; border-radius: 12px; padding: 20px; box-shadow: 0 5px 15px rgba(0,0,0,0.1); border-top: 4px solid #667eea; }
        @media (max-width: 768px) { .schedule-grid { grid-template-columns: 1fr; } .tabs, .legend { flex-direction: column; } .form-row { grid-template-columns: 1fr; } }
    </style>
</head>
<body>
    <div class="container">
        <div class="header"><h1>ğŸš€ Sistema de GestÃ£o de Tempo</h1><p>Douglas & Camila - OrganizaÃ§Ã£o Semanal Colaborativa</p></div>
        <div class="tabs">
            <div class="tab active" onclick="showTab('schedule')">ğŸ“… Cronograma Semanal</div>
            <div class="tab" onclick="showTab('editor')">âœï¸ Adicionar Tarefa</div>
            <div class="tab" onclick="showTab('meetings')">ğŸ¤ ReuniÃµes</div>
            <div class="tab" onclick="showTab('tips')">ğŸ’¡ Dicas de Produtividade</div>
        </div>

        <div id="schedule" class="tab-content active">
            <div id="statusIndicator" class="status-indicator">Conectando ao servidor...</div>
            <div class="legend">
                <div class="legend-item"><div class="legend-color" style="background: #667eea;"></div><span>Douglas</span></div>
                <div class="legend-item"><div class="legend-color" style="background: #764ba2;"></div><span>Camila</span></div>
                <div class="legend-item"><div class="legend-color" style="background: #28a745;"></div><span>Ambos</span></div>
            </div>
            <div style="text-align: center; margin-bottom: 20px;"><button class="action-btn" style="background: #c82333;" onclick="clearAllTasks()">ğŸ—‘ï¸ Zerar Todas as Tarefas</button></div>
            <div class="schedule-grid">
                <div class="schedule-header">HorÃ¡rio</div><div class="schedule-header">Segunda</div><div class="schedule-header">TerÃ§a</div><div class="schedule-header">Quarta</div><div class="schedule-header">Quinta</div><div class="schedule-header">Sexta</div>
                <div class="schedule-header">9:00-11:00</div><div id="cell-segunda-9-11" class="schedule-cell"></div><div id="cell-terca-9-11" class="schedule-cell"></div><div id="cell-quarta-9-11" class="schedule-cell"></div><div id="cell-quinta-9-11" class="schedule-cell"></div><div id="cell-sexta-9-11" class="schedule-cell"></div>
                <div class="schedule-header">11:00-13:00</div><div id="cell-segunda-11-13" class="schedule-cell"></div><div id="cell-terca-11-13" class="schedule-cell"></div><div id="cell-quarta-11-13" class="schedule-cell"></div><div id="cell-quinta-11-13" class="schedule-cell"></div><div id="cell-sexta-11-13" class="schedule-cell"></div>
                <div class="schedule-header">14:00-16:00</div><div id="cell-segunda-14-16" class="schedule-cell"></div><div id="cell-terca-14-16" class="schedule-cell"></div><div id="cell-quarta-14-16" class="schedule-cell"></div><div id="cell-quinta-14-16" class="schedule-cell"></div><div id="cell-sexta-14-16" class="schedule-cell"></div>
                <div class="schedule-header">16:00-19:00</div><div id="cell-segunda-16-19" class="schedule-cell"></div><div id="cell-terca-16-19" class="schedule-cell"></div><div id="cell-quarta-16-19" class="schedule-cell"></div><div id="cell-quinta-16-19" class="schedule-cell"></div><div id="cell-sexta-16-19" class="schedule-cell"></div>
            </div>
        </div>

        <div id="editor" class="tab-content">
             <div class="editor-form">
                <h2>âœï¸ Adicionar Nova Tarefa</h2>
                <div class="form-row"><label><strong>Dia:</strong></label><select id="dayInput" class="form-input"><option value="segunda">Segunda</option><option value="terca">TerÃ§a</option><option value="quarta">Quarta</option><option value="quinta">Quinta</option><option value="sexta">Sexta</option></select></div>
                <div class="form-row"><label><strong>HorÃ¡rio:</strong></label><select id="timeInput" class="form-input"><option value="9-11">9:00-11:00</option><option value="11-13">11:00-13:00</option><option value="14-16">14:00-16:00</option><option value="16-19">16:00-19:00</option></select></div>
                <div class="form-row"><label><strong>Atividade:</strong></label><input type="text" id="activityInput" class="form-input" placeholder="Ex: RelatÃ³rio semanal"></div>
                <div class="form-row"><label><strong>ResponsÃ¡vel:</strong></label><select id="responsibleInput" class="form-input"><option value="douglas">Douglas</option><option value="camila">Camila</option><option value="ambos">Ambos</option></select></div>
                <div class="form-row"><label><strong>DescriÃ§Ã£o:</strong></label><textarea id="descriptionInput" class="form-input" rows="3" placeholder="Opcional: detalhes que aparecerÃ£o ao clicar na tarefa."></textarea></div>
                <div style="text-align: center;"><button class="action-btn" onclick="addTask()">â• Adicionar Tarefa</button></div>
            </div>
             <div class="emoji-box">
                <h4 style="margin-top:0; margin-bottom: 15px;">ğŸ¨ Clique para Copiar um Emoji:</h4>
                <span onclick="copyEmoji('ğŸš€')">ğŸš€</span><span onclick="copyEmoji('ğŸ“Š')">ğŸ“Š</span><span onclick="copyEmoji('ğŸ“…')">ğŸ“…</span><span onclick="copyEmoji('âœ…')">âœ…</span><span onclick="copyEmoji('ğŸ“')">ğŸ“</span><span onclick="copyEmoji('ğŸ“§')">ğŸ“§</span><span onclick="copyEmoji('ğŸ’¡')">ğŸ’¡</span><span onclick="copyEmoji('ğŸ¯')">ğŸ¯</span><span onclick="copyEmoji('ğŸ¤')">ğŸ¤</span><span onclick="copyEmoji('ğŸ‰')">ğŸ‰</span>
            </div>
        </div>

        <div id="meetings" class="tab-content">
            <div class="editor-form">
                 <h2>ğŸ¤ Adicionar Nova ReuniÃ£o</h2>
                 <div class="form-row"><label><strong>TÃ­tulo:</strong></label><input type="text" id="meetingTitle" class="form-input" placeholder="Ex: ReuniÃ£o com Diretor"></div>
                 <div class="form-row"><label><strong>FrequÃªncia/Data:</strong></label><input type="text" id="meetingFreq" class="form-input" placeholder="Ex: Semanal, TerÃ§as 17h"></div>
                 <div class="form-row"><label><strong>Objetivo:</strong></label><textarea id="meetingObjective" class="form-input" rows="2" placeholder="Ex: Apresentar resultados"></textarea></div>
                 <div style="text-align: center;"><button class="action-btn" onclick="addMeeting()">â• Adicionar ReuniÃ£o</button></div>
            </div>
            <div class="emoji-box">
                <h4 style="margin-top:0; margin-bottom: 15px;">ğŸ¨ Clique para Copiar um Emoji:</h4>
                <span onclick="copyEmoji('ğŸš€')">ğŸš€</span><span onclick="copyEmoji('ğŸ“Š')">ğŸ“Š</span><span onclick="copyEmoji('ğŸ“…')">ğŸ“…</span><span onclick="copyEmoji('âœ…')">âœ…</span><span onclick="copyEmoji('ğŸ“')">ğŸ“</span><span onclick="copyEmoji('ğŸ“§')">ğŸ“§</span><span onclick="copyEmoji('ğŸ’¡')">ğŸ’¡</span><span onclick="copyEmoji('ğŸ¯')">ğŸ¯</span><span onclick="copyEmoji('ğŸ¤')">ğŸ¤</span><span onclick="copyEmoji('ğŸ‰')">ğŸ‰</span>
            </div>
            <h2>ğŸ“‹ Quadro de ReuniÃµes</h2>
            <div id="meeting-grid" class="meeting-grid"></div>
        </div>
        
        <div id="tips" class="tab-content">
            <h2>ğŸ’¡ Dicas de Produtividade</h2>
            <div class="tips-grid">
                <div class="tip-card"><h4>ğŸ¯ GestÃ£o de Prioridades</h4><p>Use a matriz Eisenhower: Urgente/Importante. Foquem nas tarefas importantes mas nÃ£o urgentes para evitar firefighting.</p></div>
                <div class="tip-card"><h4>â° Time Boxing</h4><p>Definam blocos especÃ­ficos para cada tipo de atividade. Ex: 9h-11h sempre para as tarefas temÃ¡ticas do dia.</p></div>
                <div class="tip-card"><h4>ğŸ”„ ReuniÃµes Eficientes</h4><p>Sempre com pauta prÃ©via, mÃ¡ximo 60min, e action itens claros com responsÃ¡veis e prazos.</p></div>
                <div class="tip-card"><h4>ğŸ“Š MÃ©tricas Visuais</h4><p>Usem grÃ¡ficos simples para acompanhar KPIs semanais. VisualizaÃ§Ã£o facilita tomada de decisÃ£o.</p></div>
                <div class="tip-card"><h4>ğŸš€ AutomaÃ§Ã£o Inteligente</h4><p>Use ferramentas como Zapier para automatizar relatÃ³rios e templates de e-mails recorrentes.</p></div>
                <div class="tip-card"><h4>ğŸ¤ ComunicaÃ§Ã£o Clara</h4><p>Status updates diÃ¡rios de 5min: "Ontem fiz X, hoje vou fazer Y, preciso de ajuda em Z".</p></div>
            </div>
        </div>
    </div>

    <div id="descriptionModal" class="modal" onclick="hideDescription()"><div class="modal-content" onclick="event.stopPropagation()"><span class="modal-close" onclick="hideDescription()">&times;</span><h3>ğŸ“ DescriÃ§Ã£o da Tarefa</h3><p id="modalDescriptionText"></p></div></div>

    <script src="https://www.gstatic.com/firebasejs/9.6.7/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.7/firebase-firestore-compat.js"></script>

    <script>
        const firebaseConfig = {
            apiKey: "AIzaSyCpc_gmNWmBR_XPLWX9VBIX2IEUZp--c_Y",
            authDomain: "gestao-tempo-divulgacao.firebaseapp.com",
            projectId: "gestao-tempo-divulgacao",
            storageBucket: "gestao-tempo-divulgacao.appspot.com",
            messagingSenderId: "1002467105440",
            appId: "1:1002467105440:web:496c7d26489bbbc6ca87c5"
        };

        // O resto do JavaScript permanece o mesmo
        firebase.initializeApp(firebaseConfig);
        const db = firebase.firestore();

        db.collection("tasks").onSnapshot((snapshot) => {
            document.getElementById('statusIndicator').style.backgroundColor = '#dcedc8';
            document.getElementById('statusIndicator').style.color = '#33691e';
            document.getElementById('statusIndicator').textContent = 'âœ… Conectado e Sincronizado em Tempo Real';
            document.querySelectorAll('.dynamic-task').forEach(task => task.remove());
            snapshot.forEach((doc) => {
                const task = doc.data();
                const taskElement = createTaskItemElement(doc.id, task);
                const targetCell = document.getElementById(task.cellId);
                if (targetCell) {
                    targetCell.appendChild(taskElement);
                }
            });
        });

        db.collection("meetings").onSnapshot((snapshot) => {
            const grid = document.getElementById('meeting-grid');
            grid.innerHTML = '';
            snapshot.forEach((doc) => {
                const meeting = doc.data();
                const card = createMeetingCardElement(doc.id, meeting);
                grid.appendChild(card);
            });
        });

        async function addTask() {
            const taskData = {
                activity: document.getElementById('activityInput').value,
                responsible: document.getElementById('responsibleInput').value,
                description: document.getElementById('descriptionInput').value,
                cellId: `cell-${document.getElementById('dayInput').value}-${document.getElementById('timeInput').value}`,
                createdAt: firebase.firestore.FieldValue.serverTimestamp()
            };
            if (!taskData.activity.trim()) { alert('âš ï¸ Atividade nÃ£o pode ser vazia!'); return; }
            try {
                await db.collection("tasks").add(taskData);
                document.getElementById('activityInput').value = '';
                document.getElementById('descriptionInput').value = '';
                showTab('schedule');
            } catch (error) {
                console.error("Erro ao adicionar tarefa: ", error);
                alert("Ocorreu um erro ao salvar a tarefa.");
            }
        }

        async function addMeeting() {
            const meetingData = {
                title: document.getElementById('meetingTitle').value,
                freq: document.getElementById('meetingFreq').value,
                objective: document.getElementById('meetingObjective').value,
            };
            if (!meetingData.title.trim()) { alert('âš ï¸ TÃ­tulo nÃ£o pode ser vazio!'); return; }
            try {
                await db.collection("meetings").add(meetingData);
                document.getElementById('meetingTitle').value = '';
                document.getElementById('meetingFreq').value = '';
                document.getElementById('meetingObjective').value = '';
            } catch (error) {
                console.error("Erro ao adicionar reuniÃ£o: ", error);
                alert("Ocorreu um erro ao salvar a reuniÃ£o.");
            }
        }
        
        async function deleteTask(id) {
            if (confirm('Tem certeza que deseja remover esta tarefa?')) {
                await db.collection("tasks").doc(id).delete();
            }
        }

        async function deleteMeeting(id) {
            if (confirm('Tem certeza que deseja remover esta reuniÃ£o?')) {
                await db.collection("meetings").doc(id).delete();
            }
        }

        async function clearAllTasks() {
            if (confirm('CUIDADO! Isso apagarÃ¡ TODAS as tarefas do cronograma para TODOS os usuÃ¡rios. Deseja continuar?')) {
                const tasksSnapshot = await db.collection("tasks").get();
                const batch = db.batch();
                tasksSnapshot.docs.forEach((doc) => {
                    batch.delete(doc.ref);
                });
                await batch.commit();
            }
        }

        function createTaskItemElement(id, taskData) {
            const div = document.createElement('div');
            div.className = `task-item responsible-${taskData.responsible} dynamic-task`;
            if (taskData.description) {
                div.dataset.description = taskData.description;
                div.onclick = function() { showDescription(this.dataset.description); };
            }
            const text = document.createTextNode(` ${taskData.activity}`);
            const removeBtn = document.createElement('span');
            removeBtn.className = 'task-item-remove';
            removeBtn.innerHTML = 'X';
            removeBtn.onclick = (e) => { e.stopPropagation(); deleteTask(id); };
            div.appendChild(removeBtn);
            div.appendChild(text);
            return div;
        }

        function createMeetingCardElement(id, meetingData) {
            const card = document.createElement('div');
            card.className = 'meeting-card';
            const removeBtn = document.createElement('span');
            removeBtn.className = 'meeting-card-remove';
            removeBtn.innerHTML = 'Ã—';
            removeBtn.onclick = (e) => deleteMeeting(id);
            card.innerHTML = `<h3>${meetingData.title}</h3><p><strong>FrequÃªncia:</strong> ${meetingData.freq}</p><p><strong>Objetivo:</strong> ${meetingData.objective || 'NÃ£o definido'}</p>`;
            card.appendChild(removeBtn);
            return card;
        }

        function showTab(tabName) {
            document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
            document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
            document.getElementById(tabName).classList.add('active');
            event.currentTarget.classList.add('active');
        }

        function showDescription(description) {
            document.getElementById('modalDescriptionText').textContent = description;
            document.getElementById('descriptionModal').style.display = "block";
        }

        function hideDescription() {
            document.getElementById('descriptionModal').style.display = "none";
        }
        
        function copyEmoji(emoji) {
            navigator.clipboard.writeText(emoji).then(() => showMessage(`âœ… Emoji "${emoji}" copiado!`));
        }
        
        function showMessage(message) {
            const messageDiv = document.createElement('div');
            messageDiv.style.cssText = `position: fixed; top: 20px; right: 20px; padding: 12px 20px; border-radius: 8px; color: white; background: linear-gradient(45deg, #28a745, #34ce57); font-weight: 600; z-index: 2000; animation: fadeIn 0.3s;`;
            messageDiv.textContent = message;
            document.body.appendChild(messageDiv);
            setTimeout(() => { document.body.removeChild(messageDiv); }, 2000);
        }
    </script>
</body>
</html>
